<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FTI App</title>
</head>

<body>
  <div id="app" x-data="ftiApp()">
    <header>
      <h1>eBook Badaboum</h1>
    </header>

    <section id="search">
      <form action="" @submit.prevent="query">
        <fieldset>
          <input type="text" name="search" placeholder="Titre, Auteur..." x-model="q" />
          <button type="submit">Rechercher</button>
        </fieldset>
        <div class="loader-wrapper">
          <div class="loader"><div></div><div></div><div></div><div></div></div>
        </div>
      </form>
    </section>

    <div class="captcha">
      <img :src="currentBook.captcha" alt="">

      <form action="" @submit.prevent="download">
        <input type="text" x-model="currentBook.code">
        <button type="submit">OK</button>
      </form>
    </div>

    <section id="download" x-show="currentBook.downloadUrl != ''">
      <a :href="currentBook.downloadUrl">Download</a>
    </section>

    <section id="results">
      <h1>RÃ©sultats</h1>
      <ul>
        <template x-for="(book, index) in books" :key="index">
          <li>
            <button class="file-info" @click="captcha($event, book.filename, book.directory)">
              <span class="type" x-text="book.type"></span>
              <span class="title" x-text="book.title"></span>
              <span class="size" x-text="book.size"></span>
            </button>
          </li>
        </template>
      </ul>
    </section>

  </div>

  <script type="module" src="./main.js"></script>
</body>

</html>